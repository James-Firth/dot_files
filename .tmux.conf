# Set prefix to Ctrl-Space
unbind C-b
set -g prefix C-Space
bind Space send-prefix

# Start numbering at 1 instead of 0 so it aligns with keyboard better
set -g base-index 1

# Better scroll history
set -g history-limit 30000

# Mouse stuff

# Allow the mouse to scroll
set -g mouse on

# Scroll history to a very large amount
set -g history-limit 300000


### Experimental ###

# Vim-like pane navigation and resizing.
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5

## ! Very different than default keybinds ##
# Split panes using | and -. Start the new pane at the path of the current pane.
unbind-key '"'
unbind-key %
bind-key | split-window -h -c "#{pane_current_path}"
bind-key - split-window -v -c "#{pane_current_path}"


## Start Tmux Nesting ##
# Used when sshing into something that is also using tmux.
# credit: https://gist.github.com/samoshkin/05e65f7f1c9b55d3fc7690b59d678734?permalink_comment_id=4616322#gistcomment-4616322
# When Passthrough Mode is active, the status bar will be pink and no prefix, ie normal tmux, will not work
# in the current terminal.

# Activate "Passthrough Mode". 
# NOTE: M = Option on MacOS right now
bind -n M-o \
    set prefix None \;\
    set key-table off \;\
    set status-style "fg=#ff5555,bg=#ff79c6"

# Disable "Passhthrough Mode"
bind -T off M-O \
    set -u prefix \;\
    set -u key-table \;\
    set -u status-style
## End Tmux Nesting ##

#### DRACULA #######
# TODO: just grab the colours for this since it's harder to customize the status styles with this plugin enabled as it seems to override??
# use tpm to install the plugin
set -g @plugin 'dracula/tmux'

# Switch smiley
set -g @dracula-show-left-icon ðŸ¦‡
set -g @dracula-synchronize-panes-label "Sync"

# Config right status
#set -g @dracula-show-fahrenheit false # Does not seem to work
set -g @dracula-plugins "battery network time"


### TPM INSTRUCTIONS###
# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# Other examples:
# set -g @plugin 'github_username/plugin_name'
# set -g @plugin 'github_username/plugin_name#branch'
# set -g @plugin 'git@github.com:user/plugin'
# set -g @plugin 'git@bitbucket.com:user/plugin'

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
